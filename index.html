<html><head>
  <title>3 Beat Problem</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  </head>
  <body>
  <div class="container">
    <div class="header">
      <div class="header-left">
        <h1>3 Beat Problem</h1>
      </div>
      <div class="header-center">
        <div class="bpm-control">
          <label for="bpm">BPM:</label>
          <input type="text" id="bpm" inputmode="numeric" pattern="[0-9]*" min="60" max="300" value="120">
        </div>
        <div class="bar-multiplier">
          <label for="barMultiplier">Bars:</label>
          <select id="barMultiplier">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
          </select>
        </div>
      </div>
      <div class="header-actions">
        <button id="playPause" disabled>
          <span class="play-icon show">▶</span>
          <span class="pause-icon">⏸</span>
        </button>
        <button id="exportMidi" class="export-button">Export MIDI</button>
        <button id="settingsToggle" class="settings-button" aria-expanded="false" aria-controls="advancedControls" title="Advanced Controls">⚙️</button>
      </div>
    </div> <!-- closing .header -->
    <!-- removed advancedControls static markup -->
    <div class="sequencer" id="sequencer1">
      <div class="circle-container">
        <div class="circle">
          <div class="circle-inner-ring"></div>
          <div class="circle-middle-ring"></div>
          <div class="circle-outer-ring"></div>
          <canvas id="spectrogram1" class="spectrogram" width="180" height="180"></canvas>
        </div>
      </div>
      <div class="controls">
        <div class="control-group">
          <label for="sound1">Sound:</label>
          <select id="sound1"></select>
        </div>
        <div class="control-group">
          <label for="note1">Note:</label>
          <select id="note1"></select>
        </div>
        <div class="control-group">
          <label for="divisions1">Divisions:</label>
          <input type="number" id="divisions1" min="1" max="16" value="4" step="1">
        </div>
        <div class="volume-control">
          <label for="volume1">Volume:</label>
          <input type="range" id="volume1" min="0" max="100" value="70" step="1">
        </div>
      </div>
    </div>

    <div class="sequencer" id="sequencer2">
      <div class="circle-container">
        <div class="circle">
          <div class="circle-inner-ring"></div>
          <div class="circle-middle-ring"></div>
          <div class="circle-outer-ring"></div>
          <canvas id="spectrogram2" class="spectrogram" width="180" height="180"></canvas>
        </div>
      </div>
      <div class="controls">
        <div class="control-group">
          <label for="sound2">Sound:</label>
          <select id="sound2"></select>
        </div>
        <div class="control-group">
          <label for="note2">Note:</label>
          <select id="note2"></select>
        </div>
        <div class="control-group">
          <label for="divisions2">Divisions:</label>
          <input type="number" id="divisions2" min="1" max="16" value="3" step="1">
        </div>
        <div class="volume-control">
          <label for="volume2">Volume:</label>
          <input type="range" id="volume2" min="0" max="100" value="70" step="1">
        </div>
      </div>
    </div>

    <div class="sequencer" id="sequencer3">
      <div class="circle-container">
        <div class="circle">
          <div class="circle-inner-ring"></div>
          <div class="circle-middle-ring"></div>
          <div class="circle-outer-ring"></div>
          <canvas id="spectrogram3" class="spectrogram" width="180" height="180"></canvas>
        </div>
      </div>
      <div class="controls">
        <div class="control-group">
          <label for="sound3">Sound:</label>
          <select id="sound3"></select>
        </div>
        <div class="control-group">
          <label for="note3">Note:</label>
          <select id="note3"></select>
        </div>
        <div class="control-group">
          <label for="divisions3">Divisions:</label>
          <input type="number" id="divisions3" min="1" max="16" value="5" step="1">
        </div>
        <div class="volume-control">
          <label for="volume3">Volume:</label>
          <input type="range" id="volume3" min="0" max="100" value="70" step="1">
        </div>
      </div>
    </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
  <script type="module" src="app.js"></script>

  </body></html>